<app-loading-spinner *ngIf="isLoading" />

<div *ngIf="isError" class="alert alert-danger text-center my-4" role="alert">
  Hi there! It looks like you're having trouble connecting üåç. Can you please
  check your internet connection and try again?
</div>

<section *ngIf="!isLoading && products.length > 0">
  <h1 class="display-1 text-center my-4">Products List</h1>

  <div
    data-aos="fade-up"
    data-aos-duration="2000"
    *ngFor="let item of products; let i = index"
    class="container mb-4"
  >
    <h3 class="h3 mb-2">
      {{ item.categoryName | titlecase }} ({{ item.totalProducts }})
    </h3>
    <div class="row row-cols-sm-1 row-cols-md-2 row-cols-lg-3 g-3">
      <div *ngFor="let product of item.products" class="col">
        <div class="card h-100">
          <a
            class="text-decoration-none text-black"
            [routerLink]="['/products', product.id]"
          >
            <img
              src="{{ product.image }}"
              class="card-img-top"
              alt="{{ product.title }}"
            />
            <div class="card-body text-center p-4">
              <p class="text-muted">
                {{ product.category | titlecase }}
              </p>
              <star-rating
                labelPosition="right"
                [readOnly]="true"
                size="large"
                [starType]="'svg'"
                [rating]="product.rating.rate"
              />
              <h5 class="card-title my-3">{{ product.title }}</h5>
              <p class="card-text lead fw-bold">
                {{ product.price | currency }}
              </p>
            </div>
          </a>

          <div
            class="card-footer border-0 d-flex justify-content-center bg-white p-4"
          >
            <button class="btn btn-primary w-50">
              <i class="bi bi-handbag"></i>
              Add To Cart
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
